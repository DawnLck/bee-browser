# 插件 - 新标签页

## 功能概述

插件的新标签页功能替换了浏览器的默认新标签页，提供了一个功能丰富的两栏布局界面，帮助用户更好地管理和浏览标签页。

## 界面布局

### 两栏布局

- **左侧**：

左侧是导航栏，
首先是“首页”按钮，
然后是 GroupTab 分组列表，分组列表需要实时同步。

- **右侧**：

当用户进入首页时，展示如下内容：

1. 一个搜索框，支持网址直接访问和搜索引擎查询
2. GroupTab 的卡片列表，卡片内容是 Group 下的标签页列表，卡片内容同样需要实时同步。

当用户进入分组时，展示如下内容：

1. 一个搜索框，支持网址直接访问和搜索引擎查询
2. 标签页卡片列表

- 保留新标签的搜索框功能
- 通过用户的网页浏览路径，生成拓扑图
- 标签页卡片列表

## 主要功能

### 1. 智能搜索

- 支持网址直接访问和搜索引擎查询
- 自动识别 URL 格式
- 支持 Google 搜索集成

### 2. 分组列表 (左侧栏)

- 显示所有智能分组的标签页
- 按分类显示（工作、社交、娱乐等）
- 显示每个分组的标签数量和创建时间
- 支持点击分组快速切换

### 3. 浏览路径拓扑图

- 可视化展示当前打开的标签页域名关系
- 节点大小表示该域名下的标签页数量
- 绿色节点表示当前活跃的标签页
- 连线显示域名之间的关联关系
- 支持点击节点快速切换到对应标签页

### 4. 标签页卡片列表

- 展示所有当前打开的标签页
- 支持多种过滤方式：全部、活跃、音频、已固定
- 显示标签页图标、标题、URL
- 实时状态指示器（活跃、固定、音频、静音）
- 支持快速关闭和切换标签页

### 5. 时间和问候语

- 实时时钟显示
- 智能问候语（根据时间变化）
- 美观的日期显示

### 6. 快捷操作栏

- 添加书签
- 历史记录
- 统计信息

## 技术实现

### 组件架构

```
NewTabApp (主组件)
├── SearchBox (搜索框)
├── GroupsList (分组列表)
├── BrowsingTopology (拓扑图)
└── TabCards (标签页卡片)
```

### 核心特性

- **响应式设计**：适配不同屏幕尺寸
- **实时更新**：标签页状态实时同步
- **Canvas 绘图**：高性能的拓扑图渲染
- **类型安全**：完整的 TypeScript 支持

### 数据流

1. 通过 `useTabs` Hook 获取当前标签页数据
2. 通过 `useApp` Context 获取分组数据
3. 实时监听标签页状态变化
4. 支持与 Chrome 原生 API 的完整集成

## 配置说明

在 `manifest.json` 中配置：

```json
{
  "chrome_url_overrides": {
    "newtab": "src/newtab/newtab.html"
  }
}
```

## 使用指南

1. **搜索和导航**：在顶部搜索框输入关键词或网址
2. **管理分组**：点击左侧分组查看相关标签页
3. **可视化浏览**：通过拓扑图了解网站访问关系
4. **快速切换**：通过卡片列表或拓扑图节点切换标签页
5. **筛选查看**：使用过滤器查看特定类型的标签页

## 扩展能力

- 支持自定义主题和布局
- 可扩展的搜索引擎配置
- 插件化的组件架构
- 完整的键盘快捷键支持
